## 一、实验项目名称
### C++程序的结构

## 二、实验目的
1.观察程序运行中变量的作用域、生存期和可见性，理解并能够运用作用域与可见性、对象的生存期。

2.学习类的静态成员的使用，掌握函数之间、类之间、对象之间数据的共享与保护方法。

3.学习多文件结构在C++程序中的使用，掌握编译预处理命令，学会用多文件结构和工程。

## 三、实验任务
1.运行下面的程序，观察变量x、y的作用域、生存期和可见性。 
```
//lab5_1.cpp
#include <iostream>
using namespace std;

void fn1();
int x = 1, y = 2;

int main()
{
cout << "Begin..." << endl;
cout << "x = " << x << endl;
cout << "y = " << y << endl;
cout << "Evaluate x and y in main()..." << endl;
int x = 10, y = 20;
cout << "x = " << x << endl;
cout << "y = " << y << endl;
cout << "Step into fn1()..." << endl;
fn1();
cout << "Back in main" << endl;
cout << "x = " << x << endl;
cout << "y = " << y << endl;
return 0;
}
void fn1()
{
int y = 200;
cout << "x = " << x << endl;
cout << "y = " << y << endl;
}
```

2.实现客户机（CLIENT）类。声明字符型静态数据成员ServerName，保存其服务器名称；整型静态数据成员ClientNum，记录已定义的客户数量；定义静态函数ChangeServerName()改变服务器名称。在头文件client.h中声明类，在文件client.cpp中实现，在文件test.cpp中测试这个类，观察相应的成员变量取值的变化情况。

## 四、主要仪器设备及耗材
计算机、Visual Studio 2010及以上

## 五、实验步骤
1.运行下面的程序，观察变量x、y的作用域、生存期和可见性。 
将代码复制到IDE中运行即可, 观察到x y只在本大括号内的局部作用域中取值。

2. 实现客户机（CLIENT）类。声明字符型静态数据成员ServerName，保存其服务器名称；整型静态数据成员ClientNum，记录已定义的客户数量；定义静态函数ChangeServerName()改变服务器名称。在头文件client.h中声明类，在文件client.cpp中实现，在文件test.cpp中测试这个类，观察相应的成员变量取值的变化情况。

//client.h

//client.cpp

//test.cpp

## 六、实验数据及处理结果

图1-1 观察x, y的作用域, 生存期和可见性

图1-2 Client 类测试

## 七、思考讨论题或体会或对改进实验的建议（讨论记录）
**讨论题：**
变量和对象可以定义在不同的位置：函数体内、类体内、函数原型参数表内、

**1.如何在同一个类的所有对象之间共享数据？比如需要记录一个类的对象总数。**

使用static静态变量。

**2.类的私有成员在类外不能直接访问，这是为了保护数据的安全性和隐藏细节。但是需要频繁访问私有数据时，调用接口函数的开销比较大。这个如何解决？**

使用内联函数。

**3.共享数据的安全性如何保证？**

定义成为private形式。

4.哪些操作有试图改变常对象状态的危险？

直接调用static函数，而且这个static函数可以对static变量进行改变。

**5.编译预处理命令中< >与“ ”的区别？**

系统自带的头文件使用<>，这样编译器在系统文件目录下查找；而“”是在用户目录下进行查找，最后再在系统文件中查找。

**6.当程序的规模略大些的时候，就不能将所有代码放在一个文件里了，那如何处理?**

不能。将类的声明和定义分开成同名文件一个.cpp一个.h

